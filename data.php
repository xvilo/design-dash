<?php

// Require Config
require_once __DIR__ . '/config.php';

// Require Utility Classes
require_once __DIR__ . '/lib/SempleXMLElement.php';

// Require Data Sources
require_once __DIR__ . '/datasource/Ns.php';

if (empty($_POST['type'])) {
    die('Must provide type');
}

switch ($_POST['type']) {
    case 'ns':

        if ($_POST['key'] == 'city') {
            die('{"VertrekkendeTrein":[{"RitNummer":"1848","VertrekTijd":"2017-09-12T15:45:00+0200","EindBestemming":"Den Haag Centraal","TreinSoort":"Intercity","Vervoerder":"NS","VertrekSpoor":"9b"},{"RitNummer":"2248","VertrekTijd":"2017-09-12T15:45:00+0200","EindBestemming":"Vlissingen","TreinSoort":"Intercity","RouteTekst":"Den Haag HS, Delft, Rotterdam C.","Vervoerder":"NS","VertrekSpoor":"8b"},{"RitNummer":"757","VertrekTijd":"2017-09-12T15:47:00+0200","EindBestemming":"Groningen","TreinSoort":"Intercity","RouteTekst":"Schiphol Airport, A\'dam Zuid, Almere C.","Vervoerder":"NS","VertrekSpoor":"4b"},{"RitNummer":"2257","VertrekTijd":"2017-09-12T15:50:00+0200","EindBestemming":"Amsterdam Centraal","TreinSoort":"Intercity","RouteTekst":"Haarlem, A\'dam Sloterdijk","Vervoerder":"NS","VertrekSpoor":"5b"},{"RitNummer":"6361","VertrekTijd":"2017-09-12T15:50:00+0200","VertrekVertraging":"PT1M","VertrekVertragingTekst":"+1 min","EindBestemming":"Den Haag Centraal","TreinSoort":"Sprinter","RouteTekst":"Den Haag L v NOI","Vervoerder":"NS","VertrekSpoor":"9b"},{"RitNummer":"8859","VertrekTijd":"2017-09-12T15:52:00+0200","EindBestemming":"Utrecht Centraal","TreinSoort":"Intercity","RouteTekst":"Lammenschans, Alphen a\/d Rijn, Woerden","Vervoerder":"NS","VertrekSpoor":"1"},{"RitNummer":"3354","VertrekTijd":"2017-09-12T15:53:00+0200","EindBestemming":"Hoorn Kersenboogerd","TreinSoort":"Sprinter","RouteTekst":"Schiphol Airport, A\'dam Sloterdijk, Zaandam","Vervoerder":"NS","VertrekSpoor":"4b"},{"RitNummer":"2161","VertrekTijd":"2017-09-12T16:00:00+0200","EindBestemming":"Den Haag Centraal","TreinSoort":"Intercity","Vervoerder":"NS","VertrekSpoor":"9b"},{"RitNummer":"2461","VertrekTijd":"2017-09-12T16:00:00+0200","EindBestemming":"Dordrecht","TreinSoort":"Intercity","RouteTekst":"Den Haag HS, Delft, Rotterdam C.","Vervoerder":"NS","VertrekSpoor":"8b"},{"RitNummer":"2448","VertrekTijd":"2017-09-12T16:02:00+0200","EindBestemming":"Lelystad Centrum","TreinSoort":"Intercity","RouteTekst":"Schiphol Airport, A\'dam Zuid, Almere C.","Vervoerder":"NS","VertrekSpoor":"5b","Opmerkingen":{"Opmerking":"\n\t\t\t\t\t\t\tRijdt vandaag niet\n\t\t\t\t\t\t"}},{"RitNummer":"2148","VertrekTijd":"2017-09-12T16:05:00+0200","EindBestemming":"Amsterdam Centraal","TreinSoort":"Intercity","RouteTekst":"Haarlem, A\'dam Sloterdijk","Vervoerder":"NS","VertrekSpoor":"4b"},{"RitNummer":"4646","VertrekTijd":"2017-09-12T16:05:00+0200","EindBestemming":"Den Haag Centraal","TreinSoort":"Sprinter","RouteTekst":"Den Haag L v NOI","Vervoerder":"NS","VertrekSpoor":"8a"},{"RitNummer":"8957","VertrekTijd":"2017-09-12T16:07:00+0200","EindBestemming":"Alphen a\/d Rijn","TreinSoort":"Sprinter","Vervoerder":"NS","VertrekSpoor":"2"},{"RitNummer":"4661","VertrekTijd":"2017-09-12T16:08:00+0200","EindBestemming":"Amsterdam Centraal","TreinSoort":"Sprinter","RouteTekst":"Schiphol Airport, A\'dam Sloterdijk","Vervoerder":"NS","VertrekSpoor":"4a"},{"RitNummer":"6346","VertrekTijd":"2017-09-12T16:10:00+0200","EindBestemming":"Haarlem","TreinSoort":"Sprinter","Vervoerder":"NS","VertrekSpoor":"4b"},{"RitNummer":"750","VertrekTijd":"2017-09-12T16:15:00+0200","EindBestemming":"Den Haag Centraal","TreinSoort":"Intercity","Vervoerder":"NS","VertrekSpoor":"9b"},{"RitNummer":"2250","VertrekTijd":"2017-09-12T16:15:00+0200","EindBestemming":"Vlissingen","TreinSoort":"Intercity","RouteTekst":"Den Haag HS, Delft, Rotterdam C.","Vervoerder":"NS","VertrekSpoor":"8b"},{"RitNummer":"1859","VertrekTijd":"2017-09-12T16:17:00+0200","EindBestemming":"Leeuwarden","TreinSoort":"Intercity","RouteTekst":"Schiphol Airport, A\'dam Zuid, Almere C.","Vervoerder":"NS","VertrekSpoor":"4b"},{"RitNummer":"2259","VertrekTijd":"2017-09-12T16:20:00+0200","EindBestemming":"Amsterdam Centraal","TreinSoort":"Intercity","RouteTekst":"Haarlem, A\'dam Sloterdijk","Vervoerder":"NS","VertrekSpoor":"5b"},{"RitNummer":"6363","VertrekTijd":"2017-09-12T16:20:00+0200","EindBestemming":"Den Haag Centraal","TreinSoort":"Sprinter","RouteTekst":"Den Haag L v NOI","Vervoerder":"NS","VertrekSpoor":"9b"},{"RitNummer":"8861","VertrekTijd":"2017-09-12T16:22:00+0200","EindBestemming":"Utrecht Centraal","TreinSoort":"Intercity","RouteTekst":"Lammenschans, Alphen a\/d Rijn, Woerden","Vervoerder":"NS","VertrekSpoor":"1"},{"RitNummer":"3356","VertrekTijd":"2017-09-12T16:23:00+0200","EindBestemming":"Hoorn Kersenboogerd","TreinSoort":"Sprinter","RouteTekst":"Schiphol Airport, A\'dam Sloterdijk, Zaandam","Vervoerder":"NS","VertrekSpoor":"4b"},{"RitNummer":"2163","VertrekTijd":"2017-09-12T16:30:00+0200","EindBestemming":"Den Haag Centraal","TreinSoort":"Intercity","Vervoerder":"NS","VertrekSpoor":"9b"},{"RitNummer":"2463","VertrekTijd":"2017-09-12T16:30:00+0200","EindBestemming":"Dordrecht","TreinSoort":"Intercity","RouteTekst":"Den Haag HS, Delft, Rotterdam C.","Vervoerder":"NS","VertrekSpoor":"8b"},{"RitNummer":"2450","VertrekTijd":"2017-09-12T16:32:00+0200","EindBestemming":"Lelystad Centrum","TreinSoort":"Intercity","RouteTekst":"Schiphol Airport, A\'dam Zuid, Almere C.","Vervoerder":"NS","VertrekSpoor":"5b","Opmerkingen":{"Opmerking":"\n\t\t\t\t\t\t\tRijdt vandaag niet\n\t\t\t\t\t\t"}},{"RitNummer":"2150","VertrekTijd":"2017-09-12T16:35:00+0200","EindBestemming":"Amsterdam Centraal","TreinSoort":"Intercity","RouteTekst":"Haarlem, A\'dam Sloterdijk","Vervoerder":"NS","VertrekSpoor":"4b"},{"RitNummer":"4648","VertrekTijd":"2017-09-12T16:35:00+0200","EindBestemming":"Den Haag Centraal","TreinSoort":"Sprinter","RouteTekst":"Den Haag L v NOI","Vervoerder":"NS","VertrekSpoor":"8a"},{"RitNummer":"8959","VertrekTijd":"2017-09-12T16:37:00+0200","EindBestemming":"Alphen a\/d Rijn","TreinSoort":"Sprinter","Vervoerder":"NS","VertrekSpoor":"2"},{"RitNummer":"4663","VertrekTijd":"2017-09-12T16:38:00+0200","EindBestemming":"Amsterdam Centraal","TreinSoort":"Sprinter","RouteTekst":"Schiphol Airport, A\'dam Sloterdijk","Vervoerder":"NS","VertrekSpoor":"4a"},{"RitNummer":"6348","VertrekTijd":"2017-09-12T16:40:00+0200","EindBestemming":"Haarlem","TreinSoort":"Sprinter","Vervoerder":"NS","VertrekSpoor":"4b"},{"RitNummer":"1852","VertrekTijd":"2017-09-12T16:45:00+0200","EindBestemming":"Den Haag Centraal","TreinSoort":"Intercity","Vervoerder":"NS","VertrekSpoor":"9b"},{"RitNummer":"2252","VertrekTijd":"2017-09-12T16:45:00+0200","EindBestemming":"Vlissingen","TreinSoort":"Intercity","RouteTekst":"Den Haag HS, Delft, Rotterdam C.","Vervoerder":"NS","VertrekSpoor":"8b"}]}');
            $ns = new Ns($config['ns']);
            echo $ns->getStationDepartureData($_POST['value'])->toJson();
        } else {
            die('uknown key');
        }
        break;

    default:
        die('Type unkown');
        break;
}
